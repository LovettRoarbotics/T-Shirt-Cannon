package org.usfirst.frc.team5482.robot.subsystems;

import org.usfirst.frc.team5482.robot.Constants;
import org.usfirst.frc.team5482.robot.HardwareAdapter;
import org.usfirst.frc.team5482.robot.OI;
import org.usfirst.frc.team5482.robot.commands.PollFiringSystem;

import edu.wpi.first.wpilibj.Timer;
import edu.wpi.first.wpilibj.command.Subsystem;

/**
 *
 */
public class FiringSystem extends Subsystem {
    
    // Put methods for controlling this subsystem
    // here. Call these from Commands.

    public void initDefaultCommand() {
    	setDefaultCommand(new PollFiringSystem());
    }
    
    public void fire(){
    	if (OI.mainStick.getRawButton(Constants.kSafety)){
    		// If we get the relays then we will have to figure something else out, rn we are just going to use a victor 888
    		HardwareAdapter.kFiringValve.set(1);
    		Timer.delay(Constants.fireDelay);
    		HardwareAdapter.kFiringValve.set(0);
    		resetPressure();
    		
    	}
    }
    
    public double getPressure(){
    	return fireTankPressure(HardwareAdapter.kFireTankPressure.getVoltage());
    }
    
    private void resetPressure(){
    	log("Resetting Pressure...");
    	setPressure();
    }
    
    public void setPressure(){
    	if (fireTankPressure(HardwareAdapter.kFireTankPressure.getVoltage()) <= HardwareAdapter.kFiringPressure){
    		
    	}
    }
    
    private void log(String message){
    	
    }
    
    private double fireTankPressure(double sensorIn){
    	double PSI;
    	PSI = 250*(sensorIn/5)-25;
		return PSI;
    	
    }
}

